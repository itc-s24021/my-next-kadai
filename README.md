## このサイトについて

このサイトは、タレントやパブリックフィギュアのプロフィール情報をわかりやすく紹介するためのサンプルサイトです。主に学習用やポートフォリオ用途を想定しており、Next.js（App Router）を使った構成と、外部 CMS（microCMS）との連携例を示します。

**目的**
- 人物の基本情報（プロフィール、活動期間、代表番組など）を整理して表示する。
- 画像ギャラリーで写真を閲覧できる UI を提供する。
- Next.js と外部 API の組み合わせによる実装例を示す。

**主な機能**
- トップページ: `app/page.tsx` にプロフィールの概要とナビゲーションを表示します。
- 画像ギャラリー: クライアントコンポーネント（`components/ImageGallery.tsx`）で画像の切り替えを行います。
- コンテンツ管理: `lib/microcms.ts` を経由して microCMS などの外部サービスと連携できます（環境変数で設定）。

**開発上の注意点**
- サーバーコンポーネント内で `Math.random()` や `Date.now()` のような副作用を持つ関数を実行するとエラーになります。乱数やクライアントでのインタラクションはクライアントコンポーネント（`'use client'`）で扱ってください。
- 画像は `public/` 配下に置くとルート相対パス（例: `/profile6.avif`）で参照できます。

**今後の拡張案**
- 代表番組の一覧や出演年表などの詳細ページを各スラッグ（`/television` など）に追加する。
- 多言語対応（日本語／英語切替）を導入する。
- SEO やパフォーマンスの最適化を行う（メタタグ、構造化データ、画像の最適化など）。

このセクションの文言や掲載内容を調整したい場合は、具体的な修正案を教えてください。

---

### さらに詳しい技術情報

1) データ構造（想定）
- トップページは profile（単一）と cards（複数）を表示します。`lib/microcms.ts` には複数のエンドポイント用の関数が定義されています（例: `television`, `nickname`, `name`, `features`）。
- profile の想定フィールド例:

```json
{
	"name": "上沼 恵美子",
	"nameKana": "かみぬま えみこ",
	"birthDate": "1955年4月13日",
	"birthPlace": "兵庫県淡路島",
	"occupation": "タレント、司会者、漫才師、歌手",
	"agency": "上沼事務所",
	"activePeriod": "1971年〜",
	"subtitle": "関西を代表する女性タレント・司会者",
	"images": [{ "url": "/profile.jpg" }, { "url": "/profile2.jpg" }]
}
```

- cards（複数アイテム）の想定フィールド例:

```json
[{ "id": "1", "title": "代表番組", "slug": "television" }, ...]
```

2) 環境変数（必須）
- 本プロジェクトの `lib/microcms.ts` はサーバー側で次の環境変数を参照します。実行前に `.env.local` に設定してください。

```text
MICROCMS_SERVICE_DOMAIN=your-service-domain
MICROCMS_API_KEY=your-api-key
```

- 注意: これらはサーバー側で使用される想定です。フロントエンドで公開する場合は `NEXT_PUBLIC_` プレフィックスを付ける等の検討が必要ですが、API キーをクライアントで公開しないことを推奨します。

3) ローカルでの確認手順
- 依存関係をインストールして開発サーバを起動し、トップページや各スラッグ（例: `/about`, `/television`）を確認します。

```bash
npm install
npm run dev
# ブラウザで http://localhost:3000 を開く
```

4) よくあるトラブルと対処
- サーバーコンポーネントで `Math.random()` のような不純な関数を呼ぶとビルド時や実行時にエラーになります。ランダム値や DOM 関連のイベントはクライアントコンポーネントで扱ってください。
- 画像が表示されない場合は `public/` 配下に画像ファイルが存在するか、パスが正しいかを確認してください（パス例: `/profile6.avif`）。
- `components/ImageGallery.tsx` のようなクライアントコンポーネントが存在しないとインポート時にエラーになるため、コンポーネントの追加やパス確認を行ってください。

5) microCMS 側の設定メモ
- `profile` を単一のスキーマ（シングルタイプ）として作成し、上記のフィールドを追加します。
- `television`, `nickname`, `name`, `features` などはコレクション（複数アイテム）として作成すると取り回しがしやすいです。

6) デプロイ時の注意点
- Vercel などにデプロイする際は、環境変数（`MICROCMS_SERVICE_DOMAIN`, `MICROCMS_API_KEY`）をデプロイ先のダッシュボードで設定してください。
- API キーは秘密情報扱いにし、公開ビルドに直接埋め込まないようにしてください。

7) コントリビュート方法
- 変更はブランチを切って Pull Request を作成してください。軽微な文言修正は PR なしに直接 `main` に変更するルールがある場合はその限りではありません。

---

必要であれば、上記の「データ構造」セクションを基に `docs/` 配下に API 仕様書（JSON スキーマ）を追加できます。どの程度のドキュメントが必要か教えてください。
